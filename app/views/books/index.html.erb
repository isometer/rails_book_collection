<%= link_to('Back to Homepage', {controller: 'books', action: 'index'}) %>

<div alerts>
<% flash.each do |type, msg| %>
    <div style="color: red;">
        <%= msg %>
    </div>
<% end %>
</div>

<div class="books index">
    <h2>Books</h2>

    <%= link_to("Add New Book", new_book_path, class: 'action new') %>

    <table class="listing" summary="book list" style="width: 100%;">
        <tr class="header" style="width: 100; text-align: left;">
            <th>Title</th>
            <th>Author</th>
            <th>Price</th>
            <th>Published Date</th>
        </tr>

        <% @books.each do |book| %>
        <tr>
            <td><%= book.title %></td>
            <td><%= book.author %></td>
            <td><%= number_to_currency(book.price, unit: "$", precision: 2, separator: ".", delimiter: ",") %></td>
            <td><%= book.published_date ? book.published_date.strftime("%m/%d/%Y") : "" %></td>
            
            <td class="actions">
                <%= link_to("Show", book_path(book), class: 'action show') %>
                <%= link_to("Edit", edit_book_path(book), class: 'action edit') %>
                <%= link_to("Delete", delete_book_path(book), class: 'action delete') %>
            </td>
        </tr>

        <% end %>
    </table>
</div>